(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bbbaeaf6"],{"41ef":function(e,t,a){},d569:function(e,t,a){"use strict";var i=a("41ef"),r=a.n(i);r.a},e036:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticClass:"box-card",staticStyle:{width:"100%"}},[a("el-dialog",{attrs:{title:"上传素材",visible:e.dialogVisible,width:"15%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{headers:e.headers,action:"http://ttapi.research.itcast.cn/mp/v1_0/user/images",name:"image","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon",staticStyle:{"line-height":"178px"}})])],1),a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("test",[a("div",[e._v("素材管理")])])],1),a("div",[a("el-radio-group",{attrs:{size:"medium"},on:{change:e.getToggle},model:{value:e.radio_all,callback:function(t){e.radio_all=t},expression:"radio_all"}},[a("el-radio-button",{attrs:{label:"all"}},[e._v("全部")]),a("el-radio-button",{attrs:{label:"collect"}},[e._v("收藏")])],1),a("el-button",{staticStyle:{float:"right"},attrs:{type:"success"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("添加素材")])],1),a("div",{staticClass:"clearfix",staticStyle:{width:"85%"}},e._l(e.images,(function(t,i){return a("div",{key:i,ref:"toggle_box",refInFor:!0,staticClass:"block",staticStyle:{width:"170px",height:"170px",float:"left",margin:"15px 40px"}},[a("div",[a("div",[a("el-image",{staticStyle:{width:"170px",height:"170px"},attrs:{src:t.url,fit:"fit"}})],1),a("el-button-group",[a("el-button",{attrs:{type:"warning",plain:"",icon:"el-icon-star-off"},on:{click:function(a){return e.collect(t)}}}),a("el-button",{attrs:{type:"danger",plain:"",icon:"el-icon-delete"}})],1)],1)])})),0),a("div",[a("el-pagination",{attrs:{background:"",page:e.imagesQuery.page,"page-size":e.imagesQuery.per_page,layout:"prev, pager, next",total:e.total},on:{"current-change":e.currentPage}})],1)],1)},r=[],s=(a("96cf"),a("89ba")),l=a("c57c"),n={data:function(){return{total:0,images:[],imagesQuery:{page:1,per_page:10,collect:!1},radio_all:"all",radio_collect:"collect",dialogVisible:!1,imageUrl:"",headers:{Authorization:"Bearer ".concat(l["a"].getUser().token)}}},methods:{currentPage:function(e){this.imagesQuery.page=e,this.getImage()},getImage:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("/user/images",{params:this.imagesQuery});case 2:t=e.sent,a=t.data.data,this.images=a.results,this.total=a.total_count,this.imagesQuery.page=a.page,this.imagesQuery.per_page=a.per_page;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getToggle:function(){this.imagesQuery.collect=!this.imagesQuery.collect,this.getImage()},collect:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.put("user/images/".concat(t.id),{collect:!t.is_collected});case 2:this.getImage();case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleAvatarSuccess:function(e,t){var a=this;setTimeout((function(){a.dialogVisible=!1}),3e3)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a}},created:function(){this.getImage()}},c=n,o=(a("d569"),a("2877")),u=Object(o["a"])(c,i,r,!1,null,null,null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-bbbaeaf6.fc02a544.js.map